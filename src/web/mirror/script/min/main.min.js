angular.module("urcMirror",[]).run(function(o){var n="ws://127.0.0.1:8080/ws",e=new autobahn.Connection({url:n,realm:"realm1"});e.onopen=function(n){o.session=n,o.connection=e,o.$broadcast("connected"),n.call("mirror.reflect",[o.session.id,{type:"Mirror_web",name:""}])},e.onclose=function(){console.log("close")},window.onbeforeunload=function(){o.session.call("mirror.reflect",[o.session.id,null])},e.open()}).controller("mainCTRL",function(o){o.$on("connected",function(){console.log("event received"),o.session.subscribe("mirror.reflection",function(o,n){console.log(n)}).then(function(){console.log("subscribed to topic")},function(o){console.log("failed to subscribe to topic",o)})})});